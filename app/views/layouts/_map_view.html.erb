<!DOCTYPE html>
<html>
<head>
  <title>PlaceX</title>

  <script src="//maps.googleapis.com/maps/api/js?libraries=places&key=<%= raw ENV['MAPS_API_KEY'] %>"></script>
  <script src="//cdn.rawgit.com/mahnunchik/markerclustererplus/master/dist/markerclusterer.min.js"></script>

  <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>

  <script type="text/javascript">
      function initializeMap() {
          var handler = Gmaps.build('Google');
          handler.buildMap({internal: {id: 'basic_map'}}, function () {
              var markers = handler.addMarkers(<%= raw markers %>);
              handler.bounds.extendWith(markers);
              handler.fitMapToBounds();
          });
      }

      window.onload = initializeMap;
  </script>
</head>
<body>

<div id="basic_map" style='width: 100%; height: 800px;'></div>

</body>
</html>